spring:
  datasource:
    url: jdbc:postgresql://postgres:5432/edu_db
    username: edu_admin
    password: edu_password
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: none
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  sql:
    init:
      mode: always
      platform: postgres

  servlet:
    multipart:
      max-file-size: 500MB
      max-request-size: 500MB

  # üî¥ Redis Configuration
  data:
    redis:
      host: ${REDIS_HOST:redis}
      port: ${REDIS_PORT:6379}
      database: ${REDIS_DB:0}
      timeout: 60000

# üîê JWT Configuration
jwt:
  secret: ${JWT_SECRET:change-this-super-secret-key-of-32-chars-min}
  access-token-expiration-ms: 900000
  refresh-token-expiration-ms: 604800000
  issuer: edu-platform

# üåê Server Configuration
server:
  port: 8080
  servlet:
    context-path: /api/v1

# üì± Application Configuration
app:
  backend-base-url: http://172.20.10.3:8080/api/v1

# üé• Zoom Configuration
zoom:
  account-id: ${ZOOM_ACCOUNT_ID}
  client-id: ${ZOOM_CLIENT_ID}
  client-secret: ${ZOOM_CLIENT_SECRET}
  api-base-url: https://api.zoom.us/v2
  oauth-token-url: https://zoom.us/oauth/token

# üì∫ YouTube Configuration
youtube:
  client-id: ${YOUTUBE_CLIENT_ID}
  client-secret: ${YOUTUBE_CLIENT_SECRET}
  redirect-uri: ${YOUTUBE_REDIRECT_URI:http://localhost:8080/api/v1/oauth/youtube/callback}
  api-base-url: https://www.googleapis.com/youtube/v3
  authorization-url: https://accounts.google.com/o/oauth2/v2/auth
  token-url: https://oauth2.googleapis.com/token
  scopes:
    - https://www.googleapis.com/auth/youtube.upload
    - https://www.googleapis.com/auth/youtube.readonly

# üì¶ MinIO Configuration
minio:
  endpoint: ${MINIO_ENDPOINT:minio:9000}
  access-key: ${MINIO_ACCESS_KEY:minioadmin}
  secret-key: ${MINIO_SECRET_KEY:minioadmin123}
  secure: ${MINIO_SECURE:false}
  buckets:
    videos: edu-videos
    recordings: edu-recordings
    thumbnails: edu-thumbnails

# üîê System Configuration
system:
  token: ${SYSTEM_TOKEN}

# üêç Python Service Configuration
python-service:
  base-url: http://python-service:8000
  system-token: ${SYSTEM_TOKEN}

# ============================================================
# ‚úÖ SPRINT 5: INDIVIDUAL STUDENT ASSESSMENT WINDOWS
# ============================================================

# Assessment Window Settings
individual:
  assessment:
    # Time before period start when assessment becomes available
    pre-window:
      minutes: 30
    
    # Grace period after period end (hours)
    grace-period:
      hours: 2
    
    # Late submission tolerance (minutes) after grace period ends
    late-submission:
      tolerance:
        minutes: 5
    
    # Strict deadline enforcement
    strict-deadline:
      enabled: true
    
    # Cross-day submission (disabled for strict per-period windows)
    cross-day-submission:
      enabled: false

  # Time Windows (from Sprint 1)
  schedule:
    weekday:
      start: "16:00"
      end: "18:00"
    saturday:
      start: "12:00"
      end: "15:00"
    sunday:
      enabled: false

  # Background Tasks Configuration
  tasks:
    # Assessment Window Opener Task
    assessment-opener:
      enabled: true
      interval-minutes: 10
      batch-size: 100
    
    # Grace Period Expiry Task
    grace-expiry:
      enabled: true
      interval-minutes: 15
      batch-size: 100
    
    # Weekly Generation Task
    weekly-generation:
      enabled: true

  # Notification Settings
  assessment-available:
    notify:
      student: true
  
  assessment-expired:
    notify:
      student: true
      teacher: true
  
  assessment-completed:
    notify:
      teacher: true

# üìä Logging Configuration
logging:
  level:
    root: INFO
    org.springframework.web: INFO
    org.springframework.security: INFO
    org.hibernate.SQL: WARN
    com.edu.platform: DEBUG
    # Sprint 5 specific logging
    com.edu.platform.service.individual.AssessmentWindowCalculator: DEBUG
    com.edu.platform.service.individual.AssessmentAccessibilityService: DEBUG
    com.edu.platform.service.individual.GracePeriodExpiryService: DEBUG
    com.edu.platform.scheduler.AssessmentWindowOpenerTask: INFO
    com.edu.platform.scheduler.GracePeriodExpiryTask: INFO

# üìà Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      show-details: WHEN_AUTHORIZED

# üîå Supabase Configuration
supabase:
  url: ${SUPABASE_URL:}
  anon-key: ${SUPABASE_ANON_KEY:}
  service-role-key: ${SUPABASE_SERVICE_ROLE_KEY:}